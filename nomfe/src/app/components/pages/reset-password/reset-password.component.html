<div class="main-layout-box">
  <mat-card>
    <div class="d-flex justify-content-between align-items-center">
      <div class="banner-image">
        <img src="../../../../assets/images/banner.png" />
      </div>
      <div class="form-container mt-5 mb-5">
        <h1>Quên mật khẩu</h1>

        <mat-stepper linear #stepper>
          <mat-step [stepControl]="firstFormGroup" [editable]="false">
            <form [formGroup]="firstFormGroup">
              <ng-template matStepLabel>Nhập Email của bạn</ng-template>
              <mat-form-field appearance="outline">
                <mat-label>Email</mat-label>
                <input
                  matInput
                  formControlName="email"
                  placeholder="Nhập địa chỉ email của bạn..."
                  required
                />
              </mat-form-field>
              <div>
                <button
                  mat-button
                  matStepperNext
                  (click)="getUserIdWithEmail()"
                >
                  Tiếp theo
                </button>
              </div>
            </form>
          </mat-step>

          <mat-step [stepControl]="secondFormGroup" [editable]="false">
            <form [formGroup]="secondFormGroup">
              <ng-template matStepLabel>Nhập code</ng-template>
              <mat-form-field appearance="fill">
                <mat-label>Code</mat-label>
                <input
                  matInput
                  formControlName="code"
                  placeholder="Nhập code được gửi đến Email của bạn..."
                  required
                />
              </mat-form-field>
              <div>
                <button
                  mat-button
                  matStepperNext
                  (click)="getTokenByUserIdAndResetCode()"
                >
                  Tiếp theo
                </button>
              </div>
            </form>
          </mat-step>
          <mat-step>
            <form [formGroup]="thirdFormGroup">
              <ng-template matStepLabel>Đặt lại mật khẩu</ng-template>

              <div class="row mb-3">
                <div class="col">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Mật khẩu mới</mat-label>
                    <input
                      matInput
                      formControlName="new_password"
                      placeholder="Nhập mật khẩu mới của bạn..."
                    />
                    <mat-error
                      *ngIf="thirdFormGroup.controls['new_password'].errors?.['required']"
                      ><strong>Mật khẩu mới là bắt buộc</strong></mat-error
                    >
                    <mat-error
                      *ngIf="thirdFormGroup.controls['new_password'].errors?.['pattern']"
                      ><strong>Mật khẩu mới không hợp lệ</strong></mat-error
                    >
                  </mat-form-field>
                </div>
              </div>

              <div class="row mb-3">
                <div class="col">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Xác nhận mật khẩu mới</mat-label>
                    <input
                      matInput
                      formControlName="confirm_password"
                      placeholder="Nhập lại mật khẩu mới của bạn..."
                    />
                    <mat-error
                      *ngIf="thirdFormGroup.controls['confirm_password'].errors?.['required']"
                      ><strong
                        >Xác nhận mật khẩu mới là bắt buộc</strong
                      ></mat-error
                    >
                    <mat-error
                      *ngIf="thirdFormGroup.controls['confirm_password'].errors?.['pattern']"
                      ><strong
                        >Xác nhận mật khẩu mới không hợp lệ</strong
                      ></mat-error
                    >
                  </mat-form-field>
                </div>
              </div>
              <div class="d-flex aligns-item-center">
                <button
                  mat-flat-button
                  color="primary"
                  style="margin-right: 16px"
                  (click)="postResetPassword()"
                >
                  Đặt lại mật khẩu
                </button>
              </div>
            </form>
          </mat-step>
        </mat-stepper>
      </div>
    </div>
  </mat-card>
</div>
